{"timestamp": "2025-02-11T20:03:10.651195", "level": "ERROR", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Error importing Excel data: (psycopg2.errors.ForeignKeyViolation) insert or update on table \"time_entries\" violates foreign key constraint \"time_entries_customer_fkey\"\nDETAIL:  Key (customer)=(-) is not present in table \"customers\".\n\n[SQL: INSERT INTO time_entries (week_number, month, category, subcategory, customer, project, task_description, hours, date, created_at, updated_at) SELECT p0::INTEGER, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::VARCHAR, p5::VARCHAR, p6::VARCHAR, p7::FLOAT ... 46974 characters truncated ... , p8, p9, p10, sen_counter) ORDER BY sen_counter RETURNING time_entries.id, time_entries.id AS id__1]\n[parameters: {'project__0': '-', 'updated_at__0': None, 'week_number__0': 41, 'task_description__0': 'New hire orientation', 'hours__0': 6.0, 'created_at__0': datetime.datetime(2025, 2, 11, 20, 3, 9, 943195), 'customer__0': '-', 'subcategory__0': 'Other Training', 'category__0': 'Other', 'date__0': datetime.date(2024, 10, 7), 'month__0': 'October', 'project__1': '-', 'updated_at__1': None, 'week_number__1': 41, 'task_description__1': 'Andrew<>Joseph ', 'hours__1': 2.0, 'created_at__1': datetime.datetime(2025, 2, 11, 20, 3, 9, 944325), 'customer__1': '-', 'subcategory__1': 'Other Training', 'category__1': 'Other', 'date__1': datetime.date(2024, 10, 7), 'month__1': 'October', 'project__2': '-', 'updated_at__2': None, 'week_number__2': 41, 'task_description__2': 'Andrew<>Joseph ', 'hours__2': 2.0, 'created_at__2': datetime.datetime(2025, 2, 11, 20, 3, 9, 945473), 'customer__2': '-', 'subcategory__2': 'Other Training', 'category__2': 'Other', 'date__2': datetime.date(2024, 10, 8), 'month__2': 'October', 'project__3': '-', 'updated_at__3': None, 'week_number__3': 41, 'task_description__3': 'I-9 Meeting', 'hours__3': 1.0, 'created_at__3': datetime.datetime(2025, 2, 11, 20, 3, 9, 946580), 'customer__3': '-', 'subcategory__3': 'Info/File Management', 'category__3': 'Other', 'date__3': datetime.date(2024, 10, 8), 'month__3': 'October', 'project__4': '-', 'updated_at__4': None, 'week_number__4': 41, 'task_description__4': 'Workday Safety Training', 'hours__4': 5.0, 'created_at__4': datetime.datetime(2025, 2, 11, 20, 3, 9, 947758) ... 2276 parameters truncated ... 'created_at__211': datetime.datetime(2025, 2, 11, 20, 3, 10, 184292), 'customer__211': '-', 'subcategory__211': 'Holidays', 'category__211': 'Other', 'date__211': datetime.date(2024, 12, 25), 'month__211': 'December', 'project__212': '-', 'updated_at__212': None, 'week_number__212': 52, 'task_description__212': 'Compiling report for Hiland', 'hours__212': 8.0, 'created_at__212': datetime.datetime(2025, 2, 11, 20, 3, 10, 185371), 'customer__212': '-', 'subcategory__212': 'Info/File Management', 'category__212': 'Other', 'date__212': datetime.date(2024, 12, 26), 'month__212': 'December', 'project__213': '-', 'updated_at__213': None, 'week_number__213': 52, 'task_description__213': 'Compiling report for Hiland', 'hours__213': 8.0, 'created_at__213': datetime.datetime(2025, 2, 11, 20, 3, 10, 186472), 'customer__213': '-', 'subcategory__213': 'Info/File Management', 'category__213': 'Other', 'date__213': datetime.date(2024, 12, 27), 'month__213': 'December', 'project__214': '-', 'updated_at__214': None, 'week_number__214': 1, 'task_description__214': 'Compiling report for Hiland', 'hours__214': 8.0, 'created_at__214': datetime.datetime(2025, 2, 11, 20, 3, 10, 187568), 'customer__214': '-', 'subcategory__214': 'Info/File Management', 'category__214': 'Other', 'date__214': datetime.date(2024, 12, 30), 'month__214': 'December', 'project__215': '-', 'updated_at__215': None, 'week_number__215': 1, 'task_description__215': 'NYE', 'hours__215': 8.0, 'created_at__215': datetime.datetime(2025, 2, 11, 20, 3, 10, 188669), 'customer__215': '-', 'subcategory__215': 'Holidays', 'category__215': 'Other', 'date__215': datetime.date(2024, 12, 31), 'month__215': 'December'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "context": {}}
{"timestamp": "2025-02-11T20:03:10.651914", "level": "ERROR", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Error processing timesheet: (psycopg2.errors.ForeignKeyViolation) insert or update on table \"time_entries\" violates foreign key constraint \"time_entries_customer_fkey\"\nDETAIL:  Key (customer)=(-) is not present in table \"customers\".\n\n[SQL: INSERT INTO time_entries (week_number, month, category, subcategory, customer, project, task_description, hours, date, created_at, updated_at) SELECT p0::INTEGER, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::VARCHAR, p5::VARCHAR, p6::VARCHAR, p7::FLOAT ... 46974 characters truncated ... , p8, p9, p10, sen_counter) ORDER BY sen_counter RETURNING time_entries.id, time_entries.id AS id__1]\n[parameters: {'project__0': '-', 'updated_at__0': None, 'week_number__0': 41, 'task_description__0': 'New hire orientation', 'hours__0': 6.0, 'created_at__0': datetime.datetime(2025, 2, 11, 20, 3, 9, 943195), 'customer__0': '-', 'subcategory__0': 'Other Training', 'category__0': 'Other', 'date__0': datetime.date(2024, 10, 7), 'month__0': 'October', 'project__1': '-', 'updated_at__1': None, 'week_number__1': 41, 'task_description__1': 'Andrew<>Joseph ', 'hours__1': 2.0, 'created_at__1': datetime.datetime(2025, 2, 11, 20, 3, 9, 944325), 'customer__1': '-', 'subcategory__1': 'Other Training', 'category__1': 'Other', 'date__1': datetime.date(2024, 10, 7), 'month__1': 'October', 'project__2': '-', 'updated_at__2': None, 'week_number__2': 41, 'task_description__2': 'Andrew<>Joseph ', 'hours__2': 2.0, 'created_at__2': datetime.datetime(2025, 2, 11, 20, 3, 9, 945473), 'customer__2': '-', 'subcategory__2': 'Other Training', 'category__2': 'Other', 'date__2': datetime.date(2024, 10, 8), 'month__2': 'October', 'project__3': '-', 'updated_at__3': None, 'week_number__3': 41, 'task_description__3': 'I-9 Meeting', 'hours__3': 1.0, 'created_at__3': datetime.datetime(2025, 2, 11, 20, 3, 9, 946580), 'customer__3': '-', 'subcategory__3': 'Info/File Management', 'category__3': 'Other', 'date__3': datetime.date(2024, 10, 8), 'month__3': 'October', 'project__4': '-', 'updated_at__4': None, 'week_number__4': 41, 'task_description__4': 'Workday Safety Training', 'hours__4': 5.0, 'created_at__4': datetime.datetime(2025, 2, 11, 20, 3, 9, 947758) ... 2276 parameters truncated ... 'created_at__211': datetime.datetime(2025, 2, 11, 20, 3, 10, 184292), 'customer__211': '-', 'subcategory__211': 'Holidays', 'category__211': 'Other', 'date__211': datetime.date(2024, 12, 25), 'month__211': 'December', 'project__212': '-', 'updated_at__212': None, 'week_number__212': 52, 'task_description__212': 'Compiling report for Hiland', 'hours__212': 8.0, 'created_at__212': datetime.datetime(2025, 2, 11, 20, 3, 10, 185371), 'customer__212': '-', 'subcategory__212': 'Info/File Management', 'category__212': 'Other', 'date__212': datetime.date(2024, 12, 26), 'month__212': 'December', 'project__213': '-', 'updated_at__213': None, 'week_number__213': 52, 'task_description__213': 'Compiling report for Hiland', 'hours__213': 8.0, 'created_at__213': datetime.datetime(2025, 2, 11, 20, 3, 10, 186472), 'customer__213': '-', 'subcategory__213': 'Info/File Management', 'category__213': 'Other', 'date__213': datetime.date(2024, 12, 27), 'month__213': 'December', 'project__214': '-', 'updated_at__214': None, 'week_number__214': 1, 'task_description__214': 'Compiling report for Hiland', 'hours__214': 8.0, 'created_at__214': datetime.datetime(2025, 2, 11, 20, 3, 10, 187568), 'customer__214': '-', 'subcategory__214': 'Info/File Management', 'category__214': 'Other', 'date__214': datetime.date(2024, 12, 30), 'month__214': 'December', 'project__215': '-', 'updated_at__215': None, 'week_number__215': 1, 'task_description__215': 'NYE', 'hours__215': 8.0, 'created_at__215': datetime.datetime(2025, 2, 11, 20, 3, 10, 188669), 'customer__215': '-', 'subcategory__215': 'Holidays', 'category__215': 'Other', 'date__215': datetime.date(2024, 12, 31), 'month__215': 'December'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "context": {}}
{"timestamp": "2025-02-11T20:03:10.652560", "level": "ERROR", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Error processing timesheet: 400: (psycopg2.errors.ForeignKeyViolation) insert or update on table \"time_entries\" violates foreign key constraint \"time_entries_customer_fkey\"\nDETAIL:  Key (customer)=(-) is not present in table \"customers\".\n\n[SQL: INSERT INTO time_entries (week_number, month, category, subcategory, customer, project, task_description, hours, date, created_at, updated_at) SELECT p0::INTEGER, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::VARCHAR, p5::VARCHAR, p6::VARCHAR, p7::FLOAT ... 46974 characters truncated ... , p8, p9, p10, sen_counter) ORDER BY sen_counter RETURNING time_entries.id, time_entries.id AS id__1]\n[parameters: {'project__0': '-', 'updated_at__0': None, 'week_number__0': 41, 'task_description__0': 'New hire orientation', 'hours__0': 6.0, 'created_at__0': datetime.datetime(2025, 2, 11, 20, 3, 9, 943195), 'customer__0': '-', 'subcategory__0': 'Other Training', 'category__0': 'Other', 'date__0': datetime.date(2024, 10, 7), 'month__0': 'October', 'project__1': '-', 'updated_at__1': None, 'week_number__1': 41, 'task_description__1': 'Andrew<>Joseph ', 'hours__1': 2.0, 'created_at__1': datetime.datetime(2025, 2, 11, 20, 3, 9, 944325), 'customer__1': '-', 'subcategory__1': 'Other Training', 'category__1': 'Other', 'date__1': datetime.date(2024, 10, 7), 'month__1': 'October', 'project__2': '-', 'updated_at__2': None, 'week_number__2': 41, 'task_description__2': 'Andrew<>Joseph ', 'hours__2': 2.0, 'created_at__2': datetime.datetime(2025, 2, 11, 20, 3, 9, 945473), 'customer__2': '-', 'subcategory__2': 'Other Training', 'category__2': 'Other', 'date__2': datetime.date(2024, 10, 8), 'month__2': 'October', 'project__3': '-', 'updated_at__3': None, 'week_number__3': 41, 'task_description__3': 'I-9 Meeting', 'hours__3': 1.0, 'created_at__3': datetime.datetime(2025, 2, 11, 20, 3, 9, 946580), 'customer__3': '-', 'subcategory__3': 'Info/File Management', 'category__3': 'Other', 'date__3': datetime.date(2024, 10, 8), 'month__3': 'October', 'project__4': '-', 'updated_at__4': None, 'week_number__4': 41, 'task_description__4': 'Workday Safety Training', 'hours__4': 5.0, 'created_at__4': datetime.datetime(2025, 2, 11, 20, 3, 9, 947758) ... 2276 parameters truncated ... 'created_at__211': datetime.datetime(2025, 2, 11, 20, 3, 10, 184292), 'customer__211': '-', 'subcategory__211': 'Holidays', 'category__211': 'Other', 'date__211': datetime.date(2024, 12, 25), 'month__211': 'December', 'project__212': '-', 'updated_at__212': None, 'week_number__212': 52, 'task_description__212': 'Compiling report for Hiland', 'hours__212': 8.0, 'created_at__212': datetime.datetime(2025, 2, 11, 20, 3, 10, 185371), 'customer__212': '-', 'subcategory__212': 'Info/File Management', 'category__212': 'Other', 'date__212': datetime.date(2024, 12, 26), 'month__212': 'December', 'project__213': '-', 'updated_at__213': None, 'week_number__213': 52, 'task_description__213': 'Compiling report for Hiland', 'hours__213': 8.0, 'created_at__213': datetime.datetime(2025, 2, 11, 20, 3, 10, 186472), 'customer__213': '-', 'subcategory__213': 'Info/File Management', 'category__213': 'Other', 'date__213': datetime.date(2024, 12, 27), 'month__213': 'December', 'project__214': '-', 'updated_at__214': None, 'week_number__214': 1, 'task_description__214': 'Compiling report for Hiland', 'hours__214': 8.0, 'created_at__214': datetime.datetime(2025, 2, 11, 20, 3, 10, 187568), 'customer__214': '-', 'subcategory__214': 'Info/File Management', 'category__214': 'Other', 'date__214': datetime.date(2024, 12, 30), 'month__214': 'December', 'project__215': '-', 'updated_at__215': None, 'week_number__215': 1, 'task_description__215': 'NYE', 'hours__215': 8.0, 'created_at__215': datetime.datetime(2025, 2, 11, 20, 3, 10, 188669), 'customer__215': '-', 'subcategory__215': 'Holidays', 'category__215': 'Other', 'date__215': datetime.date(2024, 12, 31), 'month__215': 'December'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "context": {}}
{"timestamp": "2025-02-11T20:03:10.653382", "level": "ERROR", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Database session error: 400: (psycopg2.errors.ForeignKeyViolation) insert or update on table \"time_entries\" violates foreign key constraint \"time_entries_customer_fkey\"\nDETAIL:  Key (customer)=(-) is not present in table \"customers\".\n\n[SQL: INSERT INTO time_entries (week_number, month, category, subcategory, customer, project, task_description, hours, date, created_at, updated_at) SELECT p0::INTEGER, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::VARCHAR, p5::VARCHAR, p6::VARCHAR, p7::FLOAT ... 46974 characters truncated ... , p8, p9, p10, sen_counter) ORDER BY sen_counter RETURNING time_entries.id, time_entries.id AS id__1]\n[parameters: {'project__0': '-', 'updated_at__0': None, 'week_number__0': 41, 'task_description__0': 'New hire orientation', 'hours__0': 6.0, 'created_at__0': datetime.datetime(2025, 2, 11, 20, 3, 9, 943195), 'customer__0': '-', 'subcategory__0': 'Other Training', 'category__0': 'Other', 'date__0': datetime.date(2024, 10, 7), 'month__0': 'October', 'project__1': '-', 'updated_at__1': None, 'week_number__1': 41, 'task_description__1': 'Andrew<>Joseph ', 'hours__1': 2.0, 'created_at__1': datetime.datetime(2025, 2, 11, 20, 3, 9, 944325), 'customer__1': '-', 'subcategory__1': 'Other Training', 'category__1': 'Other', 'date__1': datetime.date(2024, 10, 7), 'month__1': 'October', 'project__2': '-', 'updated_at__2': None, 'week_number__2': 41, 'task_description__2': 'Andrew<>Joseph ', 'hours__2': 2.0, 'created_at__2': datetime.datetime(2025, 2, 11, 20, 3, 9, 945473), 'customer__2': '-', 'subcategory__2': 'Other Training', 'category__2': 'Other', 'date__2': datetime.date(2024, 10, 8), 'month__2': 'October', 'project__3': '-', 'updated_at__3': None, 'week_number__3': 41, 'task_description__3': 'I-9 Meeting', 'hours__3': 1.0, 'created_at__3': datetime.datetime(2025, 2, 11, 20, 3, 9, 946580), 'customer__3': '-', 'subcategory__3': 'Info/File Management', 'category__3': 'Other', 'date__3': datetime.date(2024, 10, 8), 'month__3': 'October', 'project__4': '-', 'updated_at__4': None, 'week_number__4': 41, 'task_description__4': 'Workday Safety Training', 'hours__4': 5.0, 'created_at__4': datetime.datetime(2025, 2, 11, 20, 3, 9, 947758) ... 2276 parameters truncated ... 'created_at__211': datetime.datetime(2025, 2, 11, 20, 3, 10, 184292), 'customer__211': '-', 'subcategory__211': 'Holidays', 'category__211': 'Other', 'date__211': datetime.date(2024, 12, 25), 'month__211': 'December', 'project__212': '-', 'updated_at__212': None, 'week_number__212': 52, 'task_description__212': 'Compiling report for Hiland', 'hours__212': 8.0, 'created_at__212': datetime.datetime(2025, 2, 11, 20, 3, 10, 185371), 'customer__212': '-', 'subcategory__212': 'Info/File Management', 'category__212': 'Other', 'date__212': datetime.date(2024, 12, 26), 'month__212': 'December', 'project__213': '-', 'updated_at__213': None, 'week_number__213': 52, 'task_description__213': 'Compiling report for Hiland', 'hours__213': 8.0, 'created_at__213': datetime.datetime(2025, 2, 11, 20, 3, 10, 186472), 'customer__213': '-', 'subcategory__213': 'Info/File Management', 'category__213': 'Other', 'date__213': datetime.date(2024, 12, 27), 'month__213': 'December', 'project__214': '-', 'updated_at__214': None, 'week_number__214': 1, 'task_description__214': 'Compiling report for Hiland', 'hours__214': 8.0, 'created_at__214': datetime.datetime(2025, 2, 11, 20, 3, 10, 187568), 'customer__214': '-', 'subcategory__214': 'Info/File Management', 'category__214': 'Other', 'date__214': datetime.date(2024, 12, 30), 'month__214': 'December', 'project__215': '-', 'updated_at__215': None, 'week_number__215': 1, 'task_description__215': 'NYE', 'hours__215': 8.0, 'created_at__215': datetime.datetime(2025, 2, 11, 20, 3, 10, 188669), 'customer__215': '-', 'subcategory__215': 'Holidays', 'category__215': 'Other', 'date__215': datetime.date(2024, 12, 31), 'month__215': 'December'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "context": {}}
{"timestamp": "2025-02-11T20:03:10.660934", "level": "ERROR", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Database session error details:", "context": {}, "exception": "Traceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2118, in _exec_insertmany_context\n    dialect.do_execute(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 941, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.errors.ForeignKeyViolation: insert or update on table \"time_entries\" violates foreign key constraint \"time_entries_customer_fkey\"\nDETAIL:  Key (customer)=(-) is not present in table \"customers\".\n\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/services/timesheet_service.py\", line 81, in upload_timesheet\n    entries = self.repository.import_excel(self.db, contents)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/database/timesheet_repository.py\", line 94, in import_excel\n    return self.bulk_create(db, entries)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/database/timesheet_repository.py\", line 35, in bulk_create\n    db.commit()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 2028, in commit\n    trans.commit(_to_root=True)\n  File \"<string>\", line 2, in commit\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py\", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n                ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 1313, in commit\n    self._prepare_impl()\n  File \"<string>\", line 2, in _prepare_impl\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py\", line 139, in _go\n    ret_value = fn(self, *arg, **kw)\n                ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 1288, in _prepare_impl\n    self.session.flush()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4352, in flush\n    self._flush(objects)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4487, in _flush\n    with util.safe_reraise():\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py\", line 146, in __exit__\n    raise exc_value.with_traceback(exc_tb)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py\", line 4448, in _flush\n    flush_context.execute()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 466, in execute\n    rec.execute(self)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py\", line 642, in execute\n    util.preloaded.orm_persistence.save_obj(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 93, in save_obj\n    _emit_insert_statements(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py\", line 1143, in _emit_insert_statements\n    result = connection.execute(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1418, in execute\n    return meth(\n           ^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py\", line 515, in _execute_on_connection\n    return connection._execute_clauseelement(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1640, in _execute_clauseelement\n    ret = self._execute_context(\n          ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 1844, in _execute_context\n    return self._exec_insertmany_context(dialect, context)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2126, in _exec_insertmany_context\n    self._handle_dbapi_exception(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2355, in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py\", line 2118, in _exec_insertmany_context\n    dialect.do_execute(\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py\", line 941, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table \"time_entries\" violates foreign key constraint \"time_entries_customer_fkey\"\nDETAIL:  Key (customer)=(-) is not present in table \"customers\".\n\n[SQL: INSERT INTO time_entries (week_number, month, category, subcategory, customer, project, task_description, hours, date, created_at, updated_at) SELECT p0::INTEGER, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::VARCHAR, p5::VARCHAR, p6::VARCHAR, p7::FLOAT ... 46974 characters truncated ... , p8, p9, p10, sen_counter) ORDER BY sen_counter RETURNING time_entries.id, time_entries.id AS id__1]\n[parameters: {'project__0': '-', 'updated_at__0': None, 'week_number__0': 41, 'task_description__0': 'New hire orientation', 'hours__0': 6.0, 'created_at__0': datetime.datetime(2025, 2, 11, 20, 3, 9, 943195), 'customer__0': '-', 'subcategory__0': 'Other Training', 'category__0': 'Other', 'date__0': datetime.date(2024, 10, 7), 'month__0': 'October', 'project__1': '-', 'updated_at__1': None, 'week_number__1': 41, 'task_description__1': 'Andrew<>Joseph ', 'hours__1': 2.0, 'created_at__1': datetime.datetime(2025, 2, 11, 20, 3, 9, 944325), 'customer__1': '-', 'subcategory__1': 'Other Training', 'category__1': 'Other', 'date__1': datetime.date(2024, 10, 7), 'month__1': 'October', 'project__2': '-', 'updated_at__2': None, 'week_number__2': 41, 'task_description__2': 'Andrew<>Joseph ', 'hours__2': 2.0, 'created_at__2': datetime.datetime(2025, 2, 11, 20, 3, 9, 945473), 'customer__2': '-', 'subcategory__2': 'Other Training', 'category__2': 'Other', 'date__2': datetime.date(2024, 10, 8), 'month__2': 'October', 'project__3': '-', 'updated_at__3': None, 'week_number__3': 41, 'task_description__3': 'I-9 Meeting', 'hours__3': 1.0, 'created_at__3': datetime.datetime(2025, 2, 11, 20, 3, 9, 946580), 'customer__3': '-', 'subcategory__3': 'Info/File Management', 'category__3': 'Other', 'date__3': datetime.date(2024, 10, 8), 'month__3': 'October', 'project__4': '-', 'updated_at__4': None, 'week_number__4': 41, 'task_description__4': 'Workday Safety Training', 'hours__4': 5.0, 'created_at__4': datetime.datetime(2025, 2, 11, 20, 3, 9, 947758) ... 2276 parameters truncated ... 'created_at__211': datetime.datetime(2025, 2, 11, 20, 3, 10, 184292), 'customer__211': '-', 'subcategory__211': 'Holidays', 'category__211': 'Other', 'date__211': datetime.date(2024, 12, 25), 'month__211': 'December', 'project__212': '-', 'updated_at__212': None, 'week_number__212': 52, 'task_description__212': 'Compiling report for Hiland', 'hours__212': 8.0, 'created_at__212': datetime.datetime(2025, 2, 11, 20, 3, 10, 185371), 'customer__212': '-', 'subcategory__212': 'Info/File Management', 'category__212': 'Other', 'date__212': datetime.date(2024, 12, 26), 'month__212': 'December', 'project__213': '-', 'updated_at__213': None, 'week_number__213': 52, 'task_description__213': 'Compiling report for Hiland', 'hours__213': 8.0, 'created_at__213': datetime.datetime(2025, 2, 11, 20, 3, 10, 186472), 'customer__213': '-', 'subcategory__213': 'Info/File Management', 'category__213': 'Other', 'date__213': datetime.date(2024, 12, 27), 'month__213': 'December', 'project__214': '-', 'updated_at__214': None, 'week_number__214': 1, 'task_description__214': 'Compiling report for Hiland', 'hours__214': 8.0, 'created_at__214': datetime.datetime(2025, 2, 11, 20, 3, 10, 187568), 'customer__214': '-', 'subcategory__214': 'Info/File Management', 'category__214': 'Other', 'date__214': datetime.date(2024, 12, 30), 'month__214': 'December', 'project__215': '-', 'updated_at__215': None, 'week_number__215': 1, 'task_description__215': 'NYE', 'hours__215': 8.0, 'created_at__215': datetime.datetime(2025, 2, 11, 20, 3, 10, 188669), 'customer__215': '-', 'subcategory__215': 'Holidays', 'category__215': 'Other', 'date__215': datetime.date(2024, 12, 31), 'month__215': 'December'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/database/database.py\", line 113, in get_db\n    yield db\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/fastapi/concurrency.py\", line 27, in contextmanager_in_threadpool\n    yield await run_in_threadpool(cm.__enter__)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/fastapi/routing.py\", line 301, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/fastapi/routing.py\", line 212, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/main.py\", line 259, in upload_timesheet\n    result = await service.upload_timesheet(file)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/services/timesheet_service.py\", line 125, in upload_timesheet\n    raise HTTPException(status_code=400, detail=str(e))\nfastapi.exceptions.HTTPException: 400: (psycopg2.errors.ForeignKeyViolation) insert or update on table \"time_entries\" violates foreign key constraint \"time_entries_customer_fkey\"\nDETAIL:  Key (customer)=(-) is not present in table \"customers\".\n\n[SQL: INSERT INTO time_entries (week_number, month, category, subcategory, customer, project, task_description, hours, date, created_at, updated_at) SELECT p0::INTEGER, p1::VARCHAR, p2::VARCHAR, p3::VARCHAR, p4::VARCHAR, p5::VARCHAR, p6::VARCHAR, p7::FLOAT ... 46974 characters truncated ... , p8, p9, p10, sen_counter) ORDER BY sen_counter RETURNING time_entries.id, time_entries.id AS id__1]\n[parameters: {'project__0': '-', 'updated_at__0': None, 'week_number__0': 41, 'task_description__0': 'New hire orientation', 'hours__0': 6.0, 'created_at__0': datetime.datetime(2025, 2, 11, 20, 3, 9, 943195), 'customer__0': '-', 'subcategory__0': 'Other Training', 'category__0': 'Other', 'date__0': datetime.date(2024, 10, 7), 'month__0': 'October', 'project__1': '-', 'updated_at__1': None, 'week_number__1': 41, 'task_description__1': 'Andrew<>Joseph ', 'hours__1': 2.0, 'created_at__1': datetime.datetime(2025, 2, 11, 20, 3, 9, 944325), 'customer__1': '-', 'subcategory__1': 'Other Training', 'category__1': 'Other', 'date__1': datetime.date(2024, 10, 7), 'month__1': 'October', 'project__2': '-', 'updated_at__2': None, 'week_number__2': 41, 'task_description__2': 'Andrew<>Joseph ', 'hours__2': 2.0, 'created_at__2': datetime.datetime(2025, 2, 11, 20, 3, 9, 945473), 'customer__2': '-', 'subcategory__2': 'Other Training', 'category__2': 'Other', 'date__2': datetime.date(2024, 10, 8), 'month__2': 'October', 'project__3': '-', 'updated_at__3': None, 'week_number__3': 41, 'task_description__3': 'I-9 Meeting', 'hours__3': 1.0, 'created_at__3': datetime.datetime(2025, 2, 11, 20, 3, 9, 946580), 'customer__3': '-', 'subcategory__3': 'Info/File Management', 'category__3': 'Other', 'date__3': datetime.date(2024, 10, 8), 'month__3': 'October', 'project__4': '-', 'updated_at__4': None, 'week_number__4': 41, 'task_description__4': 'Workday Safety Training', 'hours__4': 5.0, 'created_at__4': datetime.datetime(2025, 2, 11, 20, 3, 9, 947758) ... 2276 parameters truncated ... 'created_at__211': datetime.datetime(2025, 2, 11, 20, 3, 10, 184292), 'customer__211': '-', 'subcategory__211': 'Holidays', 'category__211': 'Other', 'date__211': datetime.date(2024, 12, 25), 'month__211': 'December', 'project__212': '-', 'updated_at__212': None, 'week_number__212': 52, 'task_description__212': 'Compiling report for Hiland', 'hours__212': 8.0, 'created_at__212': datetime.datetime(2025, 2, 11, 20, 3, 10, 185371), 'customer__212': '-', 'subcategory__212': 'Info/File Management', 'category__212': 'Other', 'date__212': datetime.date(2024, 12, 26), 'month__212': 'December', 'project__213': '-', 'updated_at__213': None, 'week_number__213': 52, 'task_description__213': 'Compiling report for Hiland', 'hours__213': 8.0, 'created_at__213': datetime.datetime(2025, 2, 11, 20, 3, 10, 186472), 'customer__213': '-', 'subcategory__213': 'Info/File Management', 'category__213': 'Other', 'date__213': datetime.date(2024, 12, 27), 'month__213': 'December', 'project__214': '-', 'updated_at__214': None, 'week_number__214': 1, 'task_description__214': 'Compiling report for Hiland', 'hours__214': 8.0, 'created_at__214': datetime.datetime(2025, 2, 11, 20, 3, 10, 187568), 'customer__214': '-', 'subcategory__214': 'Info/File Management', 'category__214': 'Other', 'date__214': datetime.date(2024, 12, 30), 'month__214': 'December', 'project__215': '-', 'updated_at__215': None, 'week_number__215': 1, 'task_description__215': 'NYE', 'hours__215': 8.0, 'created_at__215': datetime.datetime(2025, 2, 11, 20, 3, 10, 188669), 'customer__215': '-', 'subcategory__215': 'Holidays', 'category__215': 'Other', 'date__215': datetime.date(2024, 12, 31), 'month__215': 'December'}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"}
{"timestamp": "2025-02-11T20:03:10.663294", "level": "DEBUG", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Database session closed", "context": {}}
{"timestamp": "2025-02-11T20:03:10.663940", "level": "WARNING", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Request failed with status 400", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "status_code": 400, "method": "POST", "url": "http://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/time-entries/upload/", "process_time_ms": "915.26", "response_headers": {"content-length": "3945", "content-type": "application/json", "access-control-allow-origin": "*", "access-control-expose-headers": "X-Total-Count, X-Correlation-ID"}, "error_detail": null, "query_params": {}, "path_params": {}, "client_host": "172.31.128.11", "path": "/time-entries/upload/", "origin": "https://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev", "cors_method": null, "cors_headers": null}}
{"timestamp": "2025-02-11T20:03:10.664440", "level": "DEBUG", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Adding CORS headers to response", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "method": "POST", "path": "/time-entries/upload/", "status_code": 400}}
INFO:     172.31.128.11:48306 - "POST /time-entries/upload/ HTTP/1.1" 400 Bad Request
{"timestamp": "2025-02-11T20:03:58.877915", "level": "INFO", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Incoming request", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "method": "GET", "url": "http://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/docs", "client_host": "172.31.128.11", "headers": {"host": "6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev", "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0", "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7", "accept-encoding": "identity, gzip, deflate, br, zstd", "accept-language": "en-US,en;q=0.9", "referer": "https://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/__replco/workspace_iframe.html?initialPath=%2Fdocs&id=%3Arg0%3A", "sec-ch-ua": "\"Not A(Brand\";v=\"8\", \"Chromium\";v=\"132\", \"Microsoft Edge\";v=\"132\"", "sec-ch-ua-mobile": "?0", "sec-ch-ua-platform": "\"Windows\"", "sec-fetch-dest": "iframe", "sec-fetch-mode": "navigate", "sec-fetch-site": "same-origin", "upgrade-insecure-requests": "1", "x-forwarded-for": "67.11.111.13, 165.225.36.171, 10.83.7.121", "x-forwarded-proto": "https", "x-replit-user-bio": "", "x-replit-user-id": "", "x-replit-user-name": "", "x-replit-user-profile-image": "", "x-replit-user-roles": "", "x-replit-user-teams": "", "x-replit-user-url": ""}, "path_params": {}, "query_params": {}, "request_id": null, "path": "/docs"}}
{"timestamp": "2025-02-11T20:03:58.878653", "level": "INFO", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Request completed successfully", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "status_code": 200, "process_time_ms": "0.83", "response_headers": {"content-length": "931", "content-type": "text/html; charset=utf-8"}, "content_type": "text/html; charset=utf-8", "method": "GET", "path": "/docs"}}
{"timestamp": "2025-02-11T20:03:58.879135", "level": "DEBUG", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Adding CORS headers to response", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "method": "GET", "path": "/docs", "status_code": 200}}
INFO:     172.31.128.11:44864 - "GET /docs HTTP/1.1" 200 OK
{"timestamp": "2025-02-11T20:04:00.371830", "level": "INFO", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Incoming request", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "method": "GET", "url": "http://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/openapi.json", "client_host": "172.31.128.11", "headers": {"host": "6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev", "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0", "accept": "application/json,*/*", "accept-encoding": "gzip, deflate, br, zstd", "accept-language": "en-US,en;q=0.9", "referer": "https://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/docs", "sec-ch-ua": "\"Not A(Brand\";v=\"8\", \"Chromium\";v=\"132\", \"Microsoft Edge\";v=\"132\"", "sec-ch-ua-mobile": "?0", "sec-ch-ua-platform": "\"Windows\"", "sec-fetch-dest": "empty", "sec-fetch-mode": "cors", "sec-fetch-site": "same-origin", "x-forwarded-for": "67.11.111.13, 165.225.36.171, 10.83.7.121", "x-forwarded-proto": "https", "x-replit-user-bio": "", "x-replit-user-id": "", "x-replit-user-name": "", "x-replit-user-profile-image": "", "x-replit-user-roles": "", "x-replit-user-teams": "", "x-replit-user-url": ""}, "path_params": {}, "query_params": {}, "request_id": null, "path": "/openapi.json"}}
{"timestamp": "2025-02-11T20:04:00.373059", "level": "INFO", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Request completed successfully", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "status_code": 200, "process_time_ms": "1.37", "response_headers": {"content-length": "21721", "content-type": "application/json"}, "content_type": "application/json", "method": "GET", "path": "/openapi.json"}}
{"timestamp": "2025-02-11T20:04:00.373468", "level": "DEBUG", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Adding CORS headers to response", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "method": "GET", "path": "/openapi.json", "status_code": 200}}
INFO:     172.31.128.11:44864 - "GET /openapi.json HTTP/1.1" 200 OK
{"timestamp": "2025-02-11T20:04:00.393291", "level": "INFO", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Incoming request", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "method": "GET", "url": "http://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/favicon.ico", "client_host": "172.31.128.11", "headers": {"host": "6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev", "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36 Edg/132.0.0.0", "accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8", "accept-encoding": "gzip, deflate, br, zstd", "accept-language": "en-US,en;q=0.9", "referer": "https://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/__replco/workspace_iframe.html?initialPath=%2Fdocs&id=%3Arg0%3A", "sec-ch-ua": "\"Not A(Brand\";v=\"8\", \"Chromium\";v=\"132\", \"Microsoft Edge\";v=\"132\"", "sec-ch-ua-mobile": "?0", "sec-ch-ua-platform": "\"Windows\"", "sec-fetch-dest": "image", "sec-fetch-mode": "no-cors", "sec-fetch-site": "same-origin", "x-forwarded-for": "67.11.111.13, 165.225.36.171, 10.83.1.32", "x-forwarded-proto": "https", "x-replit-user-bio": "", "x-replit-user-id": "", "x-replit-user-name": "", "x-replit-user-profile-image": "", "x-replit-user-roles": "", "x-replit-user-teams": "", "x-replit-user-url": ""}, "path_params": {}, "query_params": {}, "request_id": null, "path": "/favicon.ico"}}
{"timestamp": "2025-02-11T20:04:00.394114", "level": "WARNING", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Request failed with status 404", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "status_code": 404, "method": "GET", "url": "http://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/favicon.ico", "process_time_ms": "0.79", "response_headers": {"content-length": "22", "content-type": "application/json"}, "error_detail": null, "query_params": {}, "path_params": {}, "client_host": "172.31.128.11", "path": "/favicon.ico", "origin": null, "cors_method": null, "cors_headers": null}}
{"timestamp": "2025-02-11T20:04:00.394618", "level": "DEBUG", "correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "logger": "TimesheetTracker", "message": "Adding CORS headers to response", "context": {"correlation_id": "0a7d5124-7318-40e9-ad78-fd05f89e1f76", "method": "GET", "path": "/favicon.ico", "status_code": 404}}
INFO:     172.31.128.11:44864 - "GET /favicon.ico HTTP/1.1" 404 Not Found