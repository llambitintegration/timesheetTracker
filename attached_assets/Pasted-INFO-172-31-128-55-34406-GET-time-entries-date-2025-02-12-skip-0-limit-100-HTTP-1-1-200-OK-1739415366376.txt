INFO:     172.31.128.55:34406 - "GET /time-entries?date=2025-02-12&skip=0&limit=100 HTTP/1.1" 200 OK
{"timestamp": "2025-02-13T02:54:48.075250", "level": "INFO", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Incoming request", "context": {"correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "method": "POST", "url": "http://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/time-entries/upload/", "client_host": "172.31.128.55", "headers": {"host": "6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev", "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Edg/133.0.0.0", "content-length": "49074", "accept": "application/json", "accept-encoding": "gzip, deflate, br, zstd", "accept-language": "en-US,en;q=0.9", "content-type": "multipart/form-data; boundary=----WebKitFormBoundaryy0BDMAv2JSNEJ6Qh", "origin": "https://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev", "referer": "https://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/docs", "sec-ch-ua": "\"Not(A:Brand\";v=\"99\", \"Microsoft Edge\";v=\"133\", \"Chromium\";v=\"133\"", "sec-ch-ua-mobile": "?0", "sec-ch-ua-platform": "\"Windows\"", "sec-fetch-dest": "empty", "sec-fetch-mode": "cors", "sec-fetch-site": "same-origin", "x-forwarded-for": "67.11.111.13, 165.225.36.171, 10.83.7.121", "x-forwarded-proto": "https", "x-replit-user-bio": "", "x-replit-user-id": "", "x-replit-user-name": "", "x-replit-user-profile-image": "", "x-replit-user-roles": "", "x-replit-user-teams": "", "x-replit-user-url": ""}, "path_params": {}, "query_params": {}, "request_id": null, "path": "/time-entries/upload/"}}
{"timestamp": "2025-02-13T02:54:48.121358", "level": "DEBUG", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Database session created", "context": {}}
{"timestamp": "2025-02-13T02:54:48.121785", "level": "INFO", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Processing timesheet upload: Hours Tracker.xlsx", "context": {}}
{"timestamp": "2025-02-13T02:54:48.122088", "level": "DEBUG", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "CustomerRepository initialized", "context": {}}
{"timestamp": "2025-02-13T02:54:48.122323", "level": "DEBUG", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "ProjectRepository initialized", "context": {}}
{"timestamp": "2025-02-13T02:54:48.122610", "level": "DEBUG", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "TimeEntryService initialized with database session", "context": {}}
{"timestamp": "2025-02-13T02:54:48.122796", "level": "DEBUG", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Starting Excel file analysis", "context": {}}
/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openpyxl/worksheet/_reader.py:329: UserWarning: Data Validation extension is not supported and will be removed
  warn(msg)
{"timestamp": "2025-02-13T02:54:49.696534", "level": "ERROR", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Error parsing Excel file: Must specify a fill 'value' or 'method'.", "context": {}}
{"timestamp": "2025-02-13T02:54:49.696807", "level": "ERROR", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Error processing Excel upload: Failed to parse Excel file: Must specify a fill 'value' or 'method'.", "context": {}}
{"timestamp": "2025-02-13T02:54:49.697575", "level": "ERROR", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Database session error: 400: Failed to parse Excel file: Must specify a fill 'value' or 'method'.", "context": {}}
{"timestamp": "2025-02-13T02:54:49.717971", "level": "ERROR", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Database session error details:", "context": {}, "exception": "Traceback (most recent call last):\n  File \"/home/runner/workspace/utils/xls_analyzer.py\", line 68, in read_excel\n    df[col] = XLSAnalyzer.clean_string_column(df[col])\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils/xls_analyzer.py\", line 19, in clean_string_column\n    return series.fillna(None).astype(str).apply(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/pandas/core/generic.py\", line 7293, in fillna\n    value, method = validate_fillna_kwargs(value, method)\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/pandas/util/_validators.py\", line 293, in validate_fillna_kwargs\n    raise ValueError(\"Must specify a fill 'value' or 'method'.\")\nValueError: Must specify a fill 'value' or 'method'.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/services/time_entry_service.py\", line 251, in process_excel_upload\n    records = analyzer.read_excel(file_contents)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/utils/xls_analyzer.py\", line 107, in read_excel\n    raise ValueError(f\"Failed to parse Excel file: {str(e)}\")\nValueError: Failed to parse Excel file: Must specify a fill 'value' or 'method'.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/workspace/database/database.py\", line 123, in get_db\n    yield db\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/fastapi/concurrency.py\", line 27, in contextmanager_in_threadpool\n    yield await run_in_threadpool(cm.__enter__)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/fastapi/routing.py\", line 301, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/fastapi/routing.py\", line 212, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/main.py\", line 364, in upload_timesheet\n    result = await service.process_excel_upload(contents, background_tasks)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/services/time_entry_service.py\", line 304, in process_excel_upload\n    raise HTTPException(status_code=400, detail=str(e))\nfastapi.exceptions.HTTPException: 400: Failed to parse Excel file: Must specify a fill 'value' or 'method'."}
{"timestamp": "2025-02-13T02:54:49.719188", "level": "DEBUG", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Database session closed", "context": {}}
{"timestamp": "2025-02-13T02:54:49.719788", "level": "WARNING", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": "Request failed with status 400", "context": {"correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "status_code": 400, "method": "POST", "url": "http://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev/time-entries/upload/", "process_time_ms": "1644.66", "response_headers": {"content-length": "81", "content-type": "application/json", "access-control-allow-origin": "*", "access-control-allow-credentials": "true", "access-control-expose-headers": "X-Total-Count, X-Correlation-ID"}, "error_detail": null, "query_params": {}, "path_params": {}, "client_host": "172.31.128.55", "path": "/time-entries/upload/", "origin": "https://6ed7ce35-85b3-498b-9e9b-4d63631ed8e3-00-2owzgyvztotfg.worf.replit.dev", "cors_method": null, "cors_headers": null}}
{"timestamp": "2025-02-13T02:54:49.720205", "level": "DEBUG", "correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "logger": "TimesheetTracker", "message": {"message": "Adding CORS headers to response", "timestamp": "2025-02-13T02:54:49.720047", "context": {"correlation_id": "ceb6359c-e93e-495d-95f0-fccbd6f52d6c", "method": "POST", "path": "/time-entries/upload/", "status_code": 400}}, "context": {}}
INFO:     172.31.128.55:55482 - "POST /time-entries/upload/ HTTP/1.1" 400 Bad Request